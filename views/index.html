<%-layout('layout')%>
<div class="container">
    <div class="row">

        <div class="col-lg-9" style="padding-right: 0px;
        padding-left: 0px;">
            <div class="panel panel-default">
                <!--话题导航部分-->

                <div class="panel-heading">
                    <ul class="nav nav-pills">
                        <li role="presentation"><a href="/">全部</a></li>
                        <li role="presentation"><a href="/?tab=tab1">英语</a></li>
                        <li role="presentation"><a href="/?tab=tab3">政治</a></li>
                        <li role="presentation"><a href="/?tab=tab2">数学</a></li>
                        <li role="presentation"><a href="/?tab=tab4">专业课</a></li>
                        <li role="presentation"><a href="/?tab=tab5">求助</a></li>
                    </ul>
                </div>
                <!--话题列表部分-->
                <div class="panel-body">
                    <!--列表部分-->
                    <div id="topic_list">
                        <%-partial('./topic/list',{collection:topics,as:'topic'})%>
                    </div>
                    <!--分页部分-->
                    <div class="pageDivide">
                        <nav aria-label="Page navigation">
                            <ul class="pagination">
                                <li>
                                    <a href="/?tab=<%=tab%>&page=1" aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                    </a>
                                </li>
                                <!--显示省略号-->
                                <% if ((page-3)>1){%>
                                   <li><a >...</a></li>
                                <%}%>
                                <!--显示小的三页-->
                                <%
                                    var i = 3;
                                    while(i>=1){
                                    if(page-i>=1){%>
                                        <li><a href='/?tab=<%=tab%>&page=<%=page-i%>'><%=page-i%></a></li>
                                    <%}
                                    i--
                                    }
                                %>

                                <!--当前页-->
                                <li class='disabled active'>
                                    <a href='/?tab=<%=tab%>&page=<%=page%>'><%=page%></a>
                                </li>
                                <!--显示比当前页大的三页-->
                                <%
                                    var i = 1;
                                    while(i<=3){
                                    if(page+i<=pageCount){%>
                                    <li><a href='/?tab=<%=tab%>&page=<%=page+i%>'><%=page+i%></a></li>
                                    <%}
                                    i++
                                    }
                                %>
                                <!--显示省略号-->
                                <% if ((page+3)< pageCount){%>
                                   <li><a>...</a></li>
                                <%}%>
                                <li>
                                    <a href="?tab=<%=tab%>&page=<%=pageCount%>" aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        <!--温馨提示-->
        <div class="col-lg-3" style="padding-left: 10px;
        padding-right: 0px;">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">温馨提示</h3>
                </div>
                <div class="panel-body">
                    请先确定是否登录？登录了以后，才可以回复楼主，帮助他人！
                </div>
            </div>
        </div>
        <!--回到顶部-->
        <div style="width: 100px; height: 3000px;">
            <!--这个带ID的p标签，叫做锚标记，放在页面顶部位置，目的：防止代码不起作用时(比如类库版本浏览器不支持)，你点击回到顶部，仍然可以通过锚标记实现-->
            <p id="pageTop"></p>
            <section id="top_sec" class="top_sec">
                <a href="#" id="goPageTop"></a>
                <a href="/" id="goPageHome"></a>
            </section>
        </div>

    </div>
</div>
<link rel='stylesheet' href='/public/stylesheets/index.css'>
<script type="text/javascript">
    //点击tab，那个tab为active
    $(function() {
        $(".nav-pills li:first").addClass("active"); //Activate first tab
        $(".nav-pills li").click(function () {
//            $(this).addClass("active").siblings().removeClass("active");
            $(".nav-pills li").removeClass("active"); //Remove any "active" class
            $(this).addClass("active"); //Add "active" class to selected tab
        });
    });
</script>